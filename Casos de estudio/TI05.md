# Tarea: Construcción de un Modelo de Detección de Transacciones Sospechosas con Variables Acumuladoras

## Objetivo
Desarrollar un modelo de clasificación binaria para identificar transacciones potencialmente fraudulentas, **incluyendo la creación de variables acumuladoras basadas en el historial reciente de cada cliente**. El objetivo pedagógico es integrar *feature engineering temporal* con un pipeline de ML supervisado.

---

## Dataset Propuesto
Se entregará un dataset con las siguientes columnas mínimas:

- `customer_id`
- `tx_datetime`
- `terminal_id`
- `amount`
- `fraud` (0 = genuina, 1 = fraude)

Las transacciones están ordenadas temporalmente por cliente.

---

## Parte 1 — Creación de Features Acumuladores (Feature Engineering)

Para cada transacción y por cada `customer_id`, calcular las siguientes variables usando únicamente **transacciones anteriores** del mismo cliente:

1. **Monto promedio de las últimas 3 transacciones**  
   `avg_amount_last3`

2. **Monto total acumulado en las últimas 24 horas**  
   `sum_amount_24h`

3. **Cantidad de transacciones en la última hora**  
   `count_tx_1h`

4. **Tiempo desde la última transacción**  
   `seconds_since_last_tx`

---

## Parte 2 — Modelado

1. **División Train/Test**
   - Usar las primeras 80% de transacciones (orden temporal) para entrenamiento.
   - Usar el 20% final para test.

2. **Entrenamiento del Modelo**
   Elegir uno de los siguientes:
   - Logistic Regression
   - Random Forest
   - Método de boosting (XGBoost, LightGBM o similar)

3. **Evaluación**
   Incluir:
   - AUC-ROC  
   - Precision  
   - Recall  
   - *Precision@k*  
     - Definir `k = 100` (predict las 100 transacciones más sospechosas)

4. **Importancia de Variables**
   - Para árboles: `feature_importances_`
   - Para regresión logística: coeficientes
   - Para XGBoost: importancia por ganancia

---

## Parte 3 — Interpretación

Responder brevemente:

1. **¿Qué variable acumuladora resultó más informativa para detectar fraude?**  
   Explicar por qué podría serlo desde un punto de vista del dominio.

2. **¿Qué diferencia observas entre usar sólo variables base (amount, merchant, country) y usar variables acumuladoras?**  
   Discutir si mejora el AUC, Precision@k, etc.

3. **¿Qué métrica considerás más relevante en fraude y por qué?**  
   Comparar AUC vs Precision–Recall vs Precision@k.

---

## Entregables

- Archivo `.ipynb` con:
  - Construcción paso a paso de features acumuladores  
  - Entrenamiento y evaluación del modelo  
  - Gráficos (ROC y/o Precision–Recall)
  - Discusión sobre otras métricas específicas
